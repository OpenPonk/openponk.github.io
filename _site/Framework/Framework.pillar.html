<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Roassal Layout - DRAFT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Highlight js -->
    <link rel="stylesheet" href="../support/html/highlightjs/styles/default.css">
    <link rel="stylesheet" href="../support/html/css/highlight-commands.css">
    <script src="../support/html/highlightjs/highlight.pack.js"></script>
    <script src="../support/html/js/highlight-commands.js"></script>

    <!-- Bootstrap -->
    <link href="../support/html/css/bootstrap.min.css" rel="stylesheet">
    <link href="../support/html/css/bootstrap-theme.min.css" rel="stylesheet">
    <style>
        .container { max-width: 55em; }
    </style>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <div class="container text-justify">
      <h2> Overall Architecture</h2>
<h3>1.  DC / Spec / Roassal composition</h3>
<p>DynaCASE is attempting to follow in some respect MVC architecture.</p>
<h4>1.1.  Model</h4>
<p>The model itself is separated from the rest of the application and in fact can be used completely independently on any other part of the DynaCASE application.</p>
<p><figure><img src="../figures/Models.png"></img><figcaption></figcaption></figure>
Element represents a singular object within the model (e.g. UML class or UML generalization). Diagram then encompasses all elements applicable to the given model.</p>
<p>Project is abstraction on top of collection of diagrams. This is mainly for application use, however it can still be used independently. It is also aware of layout of each diagram.</p>
<h5>1.1.1.  Events</h5>
<p>Model is communicating with the outside world through it's API and events.
<figure><img src="../figures/Events.png"></img><figcaption></figcaption></figure></p>
<p>Added/Removed event is fired when an element is added/removed into a diagram. Change event is fired when either element or a digram has changed in any respect. This could be change of some value (e.g. name of an element), or for diagram when the collection of elements is changed. So for example when we add an element into diagram, both AddedEvent is fired from added element and ChangedEvent from the diagram.</p>
<h4>1.2.  Controllers</h4>
<p>Controllers provide binding between model, visualization and GUI. Generally each model is controlled by it's own controller (an appropriate descendant of DCController). The responsibility of controller is to update model when some outside event requests it (e.g. value is changed from a form), and in turn update the visualization (when model is changed).</p>
<p><figure><img src="../figures/All%20layers%20simplified.png"></img><figcaption></figcaption></figure></p>
<p>More complex and chaotic model of interactions between model, controllers, gui, roassal and trachel.
<figure><img src="../figures/Architecture%20layers.png"></img><figcaption></figcaption></figure></p>
<h4>1.3.  View (Roassal)</h4>
<p>DynaCASE uses Roassal2 from <a href="http://www.moosetechnology.org/">Moose project</a></p>
<p>Roassal (and Trachel) is well documented at <a href="http://agilevisualization.com/#book">Agile Visualization</a></p>
<p>Visualisation comes in multiple layers, application itself interacts mostly only with the top one</p><ul><li> Roassal</li><li> Trachel (part of Roassal)</li><li> Athens (part of Pharo)</li><li> graphics library we should not care about</li></ul>
<h5>1.3.1.  Roassal</h5>
<p>Roassal2 is layer for manipulation with visual aspects in high-level manners, for example manipulating with elements and connecting them with edges.</p>
<p>Main behavior and drawing via Roassal is based on these Roassal parts:</p><ul><li> RTShapedObject (RTElement or RTEdge), which are semantic part, telling what we have and what is connected</li><li> RTShape (RTEllipse, RTArrowedLine, etc.), which control what shapes and looks should elements and edges use</li><li> RTView, which is where objects above take place</li></ul>
<p>Most of interaction from Roassal TO application is made using events. Any object can tell (subscribe) RTAnnouncableObject (RTShapedObject and RTView) to make given action (announce) when given event occurs. For example, when mouse clicks on such object (Trachel event TRMouseClick occurs).</p>
<h5>1.3.2.  Trachel</h5>
<p>Trachel under it defines how exactly should shapes look (TRShape). All these shapes are drawn on surface called canvas (TRCanvas). For controlling what part of canvas is displayed Trachel uses TRCamera, defining zoom (scale), size and position of current crop of canvas.</p>
<p>Trachel uses callbacks, which are somewhat similar to announcements/events, making specified action if predefined events with Trachel shapes occur (when trachel object is resized, moved or removed).</p>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../support/html/js/bootstrap.min.js"></script>

    <!-- Syntax highlighting of code blocks -->
    <script>hljs.initHighlightingOnLoad();</script>

  </body>
</html>
